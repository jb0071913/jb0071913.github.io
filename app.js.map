{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./app/app.js","webpack:///./app/components/and-or-switch.component.html","webpack:///./app/components/and-or-switch.component.js","webpack:///./app/components/collapsible-panel.component.html","webpack:///./app/components/collapsible-panel.component.js","webpack:///./app/components/components.module.js","webpack:///./app/components/query-builder.component.html","webpack:///./app/components/query-builder.component.js","webpack:///./app/components/rule-set.component.html","webpack:///./app/components/rule-set.component.js","webpack:///./app/components/rule.component.html","webpack:///./app/components/rule.component.js","webpack:///./app/demo/demo-data.service.js","webpack:///./app/demo/demo-options.component.html","webpack:///./app/demo/demo-options.component.js","webpack:///./app/demo/demo.controller.js","webpack:///./app/demo/demo.dialog.html","webpack:///./app/demo/demo.html","webpack:///./app/demo/demo.module.js","webpack:///./app/directives/directives.module.js","webpack:///./app/directives/rule-size.directive.js","webpack:///./app/services/field-data.service.js","webpack:///./app/services/filter-data.service.js","webpack:///./app/services/filter-transformation.service.js","webpack:///./app/services/rule-data.service.js","webpack:///./app/services/services.module.js"],"names":["angular","module","config","$locationProvider","$routeProvider","hashPrefix","otherwise","redirectTo","component","template","require","bindings","data","disableAnd","disableOr","disabled","displayOptions","controller","vm","switch","title","titleSize","allowEmptyRules","childRule","childRuleSet","conditionOptions","fields","initialCondition","mixRules","mode","operators","preDefinedRules","singleRuleSet","queryBuilderController","$onInit","onInit","undefined","condition","rules","rule","ruleSet","entityTerms","includeModel","logicalTerms","and","or","useTextButtons","showModel","userInputNames","defaultChildRule","defaultChildRuleSet","isFirst","onRemoveRuleSet","ruleSetController","uuid","addRule","addRuleSet","checkCondition","fieldsAvailable","onFieldChange","removeRule","removeRuleSet","savedConditionOptions","selectedFilterChanged","localConditionOptions","_filterUserInputRules","copy","length","type","enable","_applyConditionCheck","forEach","field","fieldsForRules","_","cloneDeep","_getRuleTemplate","push","_getRuleSetTemplate","option","property","find","newField","oldField","_toggleRuleFieldUse","id","index","findIndex","r","splice","name","selectedFilter","concat","names","isUserInput","indexOf","userInput","defaultTemplate","operator","value","_getTemplate","applyTemplate","v4","fieldId","allowEmpty","onRemove","options","ruleController","selectedField","selectedFieldChange","selectedOperatorChange","userInputNameSearch","userInputNameUpdated","userInputToggled","valueChanged","valueLabel","valueSearch","description","display","matchedField","treatAs","_constructValueLabel","values","validOperators","text","filter","toLowerCase","userInputNameSearchText","filterType","searchValueText","operatorValue","factory","DATA","build","show","render","entry","allowCaseSensitive","getData","key","includeModelChanged","logicTermsChanged","useTextButtonsChanged","demoOptionsController","when","demoController","controllerAs","$mdDialog","demoDataService","fieldDataService","filterDataService","ruleDataService","demos","getFields","logicTerms","openDialog","getOperators","queryFilters","getFilters","activate","quickFilterFields","val","ev","bindToController","clickOutsideToClose","DialogController","locals","builderData","targetEvent","$scope","close","cancel","directive","link","scope","elem","attr","ngModel","validate","$modelValue","$setValidity","ruleSizePresent","ruleSize","$watch","newValue","oldValue","filters","multipleValues","i","allowWildcards","getPredicateTree","filterBuilderModel","_mapRuleSet","_mapRule","criteria","criteriaNameByFieldName","_mapValues","toUpperCase","predicateTree","attributions","vals","Array","isArray","result","map","escapeRegExp","Error"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict';\r\n\r\nangular.module('queryBuilder', [\r\n  'ngAnimate',\r\n  'ngRoute',\r\n  'ngMaterial',\r\n  'ngMessages',\r\n  'angular-uuid',\r\n  'queryBuilder.services',\r\n  'queryBuilder.components',\r\n  'queryBuilder.demo',\r\n  'queryBuilder.directives'\r\n]).\r\nconfig(['$locationProvider', '$routeProvider', function($locationProvider, $routeProvider) {\r\n  $locationProvider.hashPrefix('!');\r\n  $routeProvider.otherwise({redirectTo: '/QueryBuilder/demo'});\r\n}]);\r\n","// Module\nvar code = \"<md-radio-group ng-model=\\\"$ctrl.data.condition\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"\\n                ng-if=\\\"$ctrl.data.rules.length > 1\\\"\\n                ng-disabled=\\\"$ctrl.disabled\\\">\\n    <md-radio-button value=\\\"and\\\" \\n                     ng-disabled=\\\"$ctrl.disableAnd || ($ctrl.data.condition === 'criteria' && $ctrl.data.rules.length)\\\">\\n        {{$ctrl.displayOptions ? $ctrl.displayOptions.and : 'And'}}\\n        <md-tooltip>Apply logical AND</md-tooltip>\\n    </md-radio-button>\\n    <md-radio-button value=\\\"or\\\" \\n                     ng-disabled=\\\"$ctrl.disableOr || ($ctrl.data.condition === 'criteria' && $ctrl.data.rules.length)\\\">\\n        {{$ctrl.displayOptions ? $ctrl.displayOptions.or : 'Or'}}\\n        <md-tooltip>Apply logical OR</md-tooltip>\\n    </md-radio-button>\\n</md-radio-group>\";\n// Exports\nmodule.exports = code;","'use strict';\n\nangular.module('queryBuilder.components')\n.component('andOrSwitch', {\n    template: require('./and-or-switch.component.html'),\n    bindings: {\n        data: '<',\n        disableAnd: '<?',\n        disableOr: '<?',\n        disabled: '<?',\n        displayOptions: '<?'\n    },\n    controller: function() {\n        let vm = this;\n    }\n});","// Module\nvar code = \"<div class=\\\"collapsible-panel-container\\\">\\n    <div ng-click=\\\"$ctrl.switch = !$ctrl.switch\\\" layout=\\\"row\\\" layout-align=\\\"start start\\\" flex>\\n        <md-icon flex=\\\"5\\\" ng-if=\\\"!$ctrl.switch\\\">keyboard_arrow_down</md-icon>\\n        <md-icon flex=\\\"5\\\" ng-if=\\\"$ctrl.switch\\\">keyboard_arrow_up</md-icon>\\n        <h4 ng-if=\\\"$ctrl.titleSize === 4 || !$ctrl.titleSize\\\">{{$ctrl.title}}</h4>\\n        <h3 ng-if=\\\"$ctrl.titleSize === 3\\\">{{$ctrl.title}}</h3>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","'use strict';\n\nangular.module('queryBuilder.components')\n.component('collapsiblePanel', {\n    template: require('./collapsible-panel.component.html'),\n    bindings: {\n        switch: '=',\n        title: '@',\n        titleSize: '<?'\n    },\n    controller: function() {\n        let vm = this;\n    }\n});","'use strict';\n\nangular.module('queryBuilder.components', []);","// Module\nvar code = \"<div layout-padding class=\\\"query-builder\\\">\\n    <form name=\\\"queryBuilder\\\">\\n        <rule-set allow-empty-rules=\\\"$ctrl.allowEmptyRules\\\"\\n                condition-options=\\\"$ctrl.conditionOptions\\\"\\n                default-child-rule=\\\"$ctrl.childRule\\\"\\n                default-child-rule-set=\\\"$ctrl.childRuleSet\\\"\\n                data=\\\"$ctrl.data\\\"\\n                display-options=\\\"$ctrl.displayOptions\\\"\\n                fields=\\\"$ctrl.fields\\\"\\n                initial-condition=\\\"{{$ctrl.initialCondition}}\\\"\\n                is-first=\\\"true\\\"\\n                mix-rules=\\\"$ctrl.mixRules\\\"\\n                mode=\\\"{{$ctrl.mode}}\\\"\\n                operators=\\\"$ctrl.operators\\\"\\n                pre-defined-rules=\\\"$ctrl.preDefinedRules\\\"\\n                single-rule-set=\\\"$ctrl.singleRuleSet\\\"\\n                user-input-names=\\\"$ctrl.userInputNames\\\">\\n        </rule-set>\\n    </form>\\n    <div layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n        <div flex=\\\"10\\\">Builder form valid?: </div>\\n        <md-icon flex=\\\"20\\\" ng-class=\\\"{'valid': queryBuilder.$valid, 'invalid': !queryBuilder.$valid}\\\">{{queryBuilder.$valid ? 'check_circle' : 'error'}}</md-icon>\\n        <div flex=\\\"70\\\"></div>\\n    </div>\\n    <div ng-messages=\\\"queryBuilder.$error\\\" style=\\\"color:maroon\\\">\\n        <div ng-message=\\\"invalidRuleSize\\\">{{$ctrl.displayOptions.entityTerms.ruleSet || 'Rule Set'}} must have 2 or more children</div>\\n        <div ng-message=\\\"required\\\">A required field is missing</div>\\n    </div>\\n    <collapsible-panel ng-if=\\\"$ctrl.displayOptions.includeModel\\\"\\n                       switch=\\\"$ctrl.showModel\\\"\\n                       title=\\\"Model\\\"\\n                       title-size=\\\"4\\\">\\n    </collapsible-panel>\\n    <div ng-if=\\\"$ctrl.displayOptions.includeModel && $ctrl.showModel\\\" class=\\\"model-container\\\">\\n        <pre>{{$ctrl.data|json}}</pre>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","'use strict';\n\n/**\n * A component to allow the construct of both simple and complex filters.\n * \n * The bindings are:\n * @param {boolean} allowEmptyRules Indicates if empty rules are allowed. Defaults to false.\n */\nangular.module('queryBuilder.components')\n.component('queryBuilder', {\n    template: require('./query-builder.component.html'),\n    bindings: {\n        allowEmptyRules: '<?',\n        childRule: '<?',\n        childRuleSet: '<?',\n        conditionOptions: '<?',\n        data: '=?',\n        displayOptions: '<?',\n        fields: '<?',\n        initialCondition: '@?',\n        mixRules: '<?',\n        mode: '@?',\n        operators: '<?',\n        preDefinedRules: '<?',\n        singleRuleSet: '<?'\n    },\n    controller: [queryBuilderController]\n});\n\nfunction queryBuilderController() {\n    let vm = this;\n    vm.$onInit = onInit;\n    \n    /**\n     * Initialisation of this component.\n     */\n    function onInit() {\n        if (vm.allowEmptyRules === undefined) {\n            vm.allowEmptyRules = true;\n        }\n        vm.data = vm.data || {\n            condition: 'and',\n            rules: []\n        };\n        vm.conditionOptions = vm.conditionOptions || {\n            'and': {\n                rule: true,\n                ruleSet: true\n            },\n            'or': {\n                rule: true,\n                ruleSet: true\n            },\n            'criteria': {\n                rule: false,\n                ruleSet: true\n            }\n        };\n        vm.displayOptions = vm.displayOptions || {\n            entityTerms: {\n                rule: 'Rule',\n                ruleSet: 'Rule Set'\n            },\n            includeModel: false,\n            logicalTerms: {\n                and: 'AND',\n                or: 'OR'\n            },\n            useTextButtons: false\n        };\n        vm.mode = vm.mode || 'build';\n        vm.showModel = false;\n        vm.userInputNames = [];\n    }\n\n}","// Module\nvar code = \"<div class=\\\"rule-set-container\\\">\\n    <div class=\\\"rule-set\\\" layout=\\\"row\\\">\\n        <div flex=\\\"50\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n            <and-or-switch ng-if=\\\"$ctrl.mode === 'build' || ($ctrl.mode === 'entry' && $ctrl.data.condition !== 'criteria')\\\"\\n                           data=\\\"$ctrl.data\\\"\\n                           display-options=\\\"$ctrl.displayOptions.logicalTerms\\\"\\n                           disable-and=\\\"$ctrl.disableAnd\\\"\\n                           disable-or=\\\"$ctrl.disableOr\\\">\\n            </and-or-switch>\\n            <div ng-if=\\\"$ctrl.mode === 'entry' && !$ctrl.isFirst && $ctrl.selectedFilter\\\" layout=\\\"row\\\" flex=\\\"100\\\">\\n                <div flex=\\\"60\\\">{{$ctrl.data.name}}</div>\\n                <div flex=\\\"5\\\"></div>\\n                <div ng-if=\\\"!$ctrl.data.rules.length\\\" flex=\\\"35\\\" class=\\\"read-only-message\\\">\\n                    {{$ctrl.displayOptions.entityTerms.rule || 'Rule Set'}} requires no user inputs\\n                </div>\\n            </div>\\n            <div ng-if=\\\"$ctrl.isFirst && !$ctrl.data.rules.length\\\">\\n                Please use the buttons on the right to add a {{$ctrl.displayOptions.entityTerms.rule|| 'Rule'}}/{{$ctrl.displayOptions.entityTerms.ruleSet || 'Rule Set'}}\\n            </div>\\n            <div ng-if=\\\"!$ctrl.isFirst && $ctrl.data.condition !== 'criteria' && $ctrl.data.rules.length < 2\\\">\\n                A {{$ctrl.displayOptions.entityTerms.ruleSet || 'Rule Set'}} must have 2 or more children\\n            </div>\\n            <div flex=\\\"100\\\" ng-if=\\\"$ctrl.mode === 'entry' && $ctrl.data.type === 'ruleSet' && $ctrl.data.condition === 'criteria' && !$ctrl.isFirst && !$ctrl.selectedFilter\\\">\\n                <md-select required ng-model=\\\"$ctrl.selectedFilter\\\" placeholder=\\\"Choose a filter\\\" aria-label=\\\"Choose a filter\\\" ng-change=\\\"$ctrl.selectedFilterChanged()\\\">\\n                    <md-option ng-value=\\\"filter\\\" ng-repeat=\\\"filter in $ctrl.preDefinedRules\\\">{{filter.name}}</md-option>\\n                </md-select>\\n            </div>\\n        </div>\\n        <div flex=\\\"50\\\" layout=\\\"row\\\" layout-align=\\\"end center\\\">\\n            <div>\\n                <md-icon class=\\\"add-rule\\\"\\n                         ng-click=\\\"$ctrl.checkCondition($ctrl.data.condition, 'rule', 'enable') && $ctrl.addRule()\\\" \\n                         ng-disabled=\\\"!$ctrl.checkCondition($ctrl.data.condition, 'rule', 'enable') || !$ctrl.fieldsAvailable()\\\"\\n                         ng-if=\\\"!$ctrl.displayOptions.useTextButtons && $ctrl.checkCondition($ctrl.data.condition, 'rule', 'render')\\\">\\n                    add\\n                    <md-tooltip>Add {{$ctrl.displayOptions.entityTerms.rule || 'Rule'}}</md-tooltip>\\n                </md-icon>\\n            </div>\\n            <div>\\n                <md-button class=\\\"md-small md-raised add-rule\\\"\\n                           ng-click=\\\"$ctrl.checkCondition($ctrl.data.condition, 'rule', 'enable') && $ctrl.addRule()\\\" \\n                           ng-disabled=\\\"!$ctrl.checkCondition($ctrl.data.condition, 'rule', 'enable') || !$ctrl.fieldsAvailable()\\\"\\n                           ng-if=\\\"$ctrl.displayOptions.useTextButtons && $ctrl.checkCondition($ctrl.data.condition, 'rule', 'render')\\\">\\n                    + {{$ctrl.displayOptions.entityTerms.rule|| 'Rule'}}\\n                    <md-tooltip>Add {{$ctrl.displayOptions.entityTerms.rule || 'Rule'}}</md-tooltip>\\n                </md-button>\\n            </div>\\n            <div>\\n                <md-icon class=\\\"add-rule-set\\\" \\n                         ng-click=\\\"$ctrl.checkCondition($ctrl.data.condition, 'ruleSet', 'enable') && $ctrl.addRuleSet()\\\"\\n                         ng-disabled=\\\"!$ctrl.checkCondition($ctrl.data.condition, 'ruleSet', 'enable')\\\" \\n                         ng-if=\\\"!$ctrl.displayOptions.useTextButtons && $ctrl.checkCondition($ctrl.data.condition, 'ruleSet', 'render')\\\">\\n                    add_circle_outline\\n                    <md-tooltip>Add {{$ctrl.displayOptions.entityTerms.ruleSet || 'Rule Set'}}</md-tooltip>\\n                </md-icon>\\n            </div>\\n            <div>\\n                <md-button class=\\\"md-small md-raised add-rule-set\\\" \\n                         ng-click=\\\"$ctrl.checkCondition($ctrl.data.condition, 'ruleSet', 'enable') && $ctrl.addRuleSet()\\\"\\n                         ng-disabled=\\\"!$ctrl.checkCondition($ctrl.data.condition, 'ruleSet', 'enable')\\\" \\n                         ng-if=\\\"$ctrl.displayOptions.useTextButtons && $ctrl.checkCondition($ctrl.data.condition, 'ruleSet', 'render')\\\">\\n                    + {{$ctrl.displayOptions.entityTerms.ruleSet || 'Rule Set'}}\\n                    <md-tooltip>Add {{$ctrl.displayOptions.entityTerms.ruleSet || 'Rule Set'}}</md-tooltip>\\n                </md-button>\\n            </div>\\n            <div>\\n                <md-icon class=\\\"remove-rule-set\\\" \\n                         ng-if=\\\"!$ctrl.isFirst && !$ctrl.displayOptions.useTextButtons\\\" \\n                         ng-click=\\\"$ctrl.removeRuleSet()\\\">\\n                    remove_circle_outline\\n                    <md-tooltip>Remove {{$ctrl.displayOptions.entityTerms.ruleSet || 'Rule Set'}}</md-tooltip>\\n                </md-icon>\\n            </div>\\n            <div>\\n                <md-button class=\\\"md-small md-raised remove-rule-set\\\"\\n                         ng-if=\\\"!$ctrl.isFirst && $ctrl.displayOptions.useTextButtons\\\" \\n                         ng-click=\\\"$ctrl.removeRuleSet()\\\">\\n                    X\\n                    <md-tooltip>Remove {{$ctrl.displayOptions.entityTerms.ruleSet || 'Rule Set'}}</md-tooltip>\\n                </md-button>\\n            </div>\\n        </div>\\n    </div>\\n    <div class=\\\"child-rule-container\\\"\\n         ng-class=\\\"{\\n             'rule-connector': $ctrl.data.rules.length > 1 && $ctrl.data.condition !== 'criteria',\\n             'container-outline': $ctrl.data.condition !== 'criteria'\\n        }\\\"\\n         ng-repeat=\\\"rule in $ctrl.data.rules\\\">\\n        <div ng-switch=\\\"rule.type\\\">\\n            <rule ng-switch-when=\\\"rule\\\"\\n                  allow-empty=\\\"$ctrl.allowEmptyRules\\\"\\n                  data=\\\"rule\\\"\\n                  fields=\\\"$ctrl.fieldsForRules\\\"\\n                  mode=\\\"{{$ctrl.mode}}\\\"\\n                  on-field-change=\\\"$ctrl.onFieldChange(newField, oldField)\\\"\\n                  on-remove=\\\"$ctrl.removeRule(rule)\\\"\\n                  operators=\\\"$ctrl.operators\\\"\\n                  options=\\\"$ctrl.displayOptions\\\"\\n                  user-input-names=\\\"$ctrl.userInputNames\\\">\\n            </rule>\\n            <rule-set ng-switch-when=\\\"ruleSet\\\"\\n                      allow-empty-rules=\\\"$ctrl.allowEmptyRules\\\"\\n                      condition-options=\\\"$ctrl.conditionOptions\\\"\\n                      default-child-rule=\\\"$ctrl.defaultChildRule\\\"\\n                      default-child-rule-set=\\\"$ctrl.defaultChildRuleSet\\\"\\n                      data=\\\"rule\\\"\\n                      display-options=\\\"$ctrl.displayOptions\\\"\\n                      is-first=\\\"false\\\"\\n                      fields=\\\"$ctrl.fields\\\"\\n                      initial-condition=\\\"{{$ctrl.initialCondition}}\\\"\\n                      mix-rules=\\\"$ctrl.mixRules\\\"\\n                      mode=\\\"{{$ctrl.mode}}\\\"\\n                      on-remove-rule-set=\\\"$ctrl.removeRule(rule)\\\"\\n                      operators=\\\"$ctrl.operators\\\"\\n                      pre-defined-rules=\\\"$ctrl.preDefinedRules\\\"\\n                      user-input-names=\\\"$ctrl.userInputNames\\\"\\n                      ng-model=\\\"rule\\\"\\n                      ng-attr-rule-size=\\\"{{rule.condition !== 'criteria' ? true : undefined}}\\\">\\n            </rule-set>\\n        </div>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","'use strict';\n\n/**\n * A rule set is essentially a collection of rules, wrapped with a logical operator (AND/OR).\n * \n * The bindings are:\n * @param {boolean} allowEmptyRules Indicates if empty rules are allowed. Defaults to false.\n * @param {Object} data The initial data model for the component.\n */\nangular.module('queryBuilder.components')\n.component('ruleSet', {\n    template: require('./rule-set.component.html'),\n    bindings: {\n        allowEmptyRules: '<?',\n        data: '<?',\n        displayOptions: '<?',\n        conditionOptions: '<?',\n        defaultChildRule: '<?',\n        defaultChildRuleSet: '<?',\n        fields: '<?',\n        initialCondition: '@?',\n        isFirst: '<?',\n        mixRules: '<?',\n        mode: '@',\n        onRemoveRuleSet: '&',\n        operators: '<?',\n        preDefinedRules: '<?',\n        singleRuleSet: '<?',\n        userInputNames: '<?'\n    },\n    controller: ['uuid', ruleSetController]\n});\n\nfunction ruleSetController(uuid) {\n    let vm = this;\n    vm.$onInit = onInit;\n    vm.addRule = addRule;\n    vm.addRuleSet = addRuleSet;\n    vm.checkCondition = checkCondition;\n    vm.fieldsAvailable = fieldsAvailable;\n    vm.onFieldChange = onFieldChange;\n    vm.removeRule = removeRule;\n    vm.removeRuleSet = removeRuleSet;\n    vm.savedConditionOptions;\n    vm.selectedFilterChanged = selectedFilterChanged;\n\n    let localConditionOptions;\n\n    /**\n     * Initialisation of this component.\n     */\n    function onInit() {\n\n        if (vm.allowEmptyRules === undefined) {\n            vm.allowEmptyRules = true;\n        }\n\n        if (vm.mixRules === undefined) {\n            vm.mixRules = true;\n        }\n        \n        if (!vm.data) {\n            vm.data = {\n                condition: 'and',\n                rules: []\n            };\n            // If an initial condition has been passed, use it\n            if (vm.initialCondition) {\n                vm.data.condition = vm.initialCondition;\n            }\n        }\n\n        vm.disableAnd = false;\n        vm.disableOr = false;\n\n        // Remove rules that do not require input if the mode is \"entry\"\n        if (vm.mode === 'entry') {\n            _filterUserInputRules();\n        }\n\n        localConditionOptions = angular.copy(vm.conditionOptions);\n\n        if (vm.data.rules.length && vm.data.condition && !vm.mixRules) {\n            let rule = vm.data.rules[0];\n            if (rule.type === 'rule') {\n                localConditionOptions[vm.data.condition]['ruleSet'].enable = false;\n                _applyConditionCheck('rule');\n            } else {\n                localConditionOptions[vm.data.condition]['rule'].enable = false;\n                _applyConditionCheck('ruleSet');\n            }\n        }\n\n        if (vm.fields) {\n            // Start out with all fields enabled\n            vm.fields.forEach(function(field) {\n                field.disabled = false;\n            });\n\n            // This array will be passed to each rule within this rule set\n            vm.fieldsForRules = _.cloneDeep(vm.fields);\n        }\n    }\n\n    function addRule() {\n        let rule = _getRuleTemplate();\n        vm.data.rules.push(rule);\n\n        if (!vm.mixRules) {\n            localConditionOptions[vm.data.condition]['ruleSet'].enable = false;\n            _applyConditionCheck('rule');\n        }\n    }\n\n    function addRuleSet() {\n        let ruleSet = _getRuleSetTemplate();\n        vm.data.rules.push(ruleSet);\n\n        if (!vm.mixRules) {\n            localConditionOptions[vm.data.condition]['rule'].enable = false;\n            _applyConditionCheck('ruleSet');\n        }\n    }\n\n    function checkCondition(condition, option, property) {\n        if (typeof localConditionOptions[condition][option] === 'boolean') {\n            return localConditionOptions[condition][option];\n        } else {\n            return localConditionOptions[condition][option] && localConditionOptions[condition][option][property];\n        }\n    }\n\n    /**\n     * Indicates if there are fields available for use when applying rules. Rules are only available if they are not disabled.\n     */\n    function fieldsAvailable() {\n        return _.find(vm.fieldsForRules, {disabled: false});\n    }\n\n    /**\n     * Callback passed to rule component and fired when the Field input is changed.\n     * The field denoted by newField will be disabled. The field denoted by oldField will be enabled.\n     * Updates the disabled flag on the use of fields within a single rule set.\n     * \n     * @param {Object} newField the new selected field\n     * @param {Object} oldField (optional) the previous selected field\n     */\n    function onFieldChange(newField, oldField) {\n        _toggleRuleFieldUse(newField.id, true);\n        if (oldField) {\n            _toggleRuleFieldUse(oldField.id, false);\n        }\n    }\n\n    /**\n     * Callback invoked when a rule is removed from this rule set.\n     * \n     * @param {Object} rule the rule which was removed.\n     */\n    function removeRule(rule) {\n        let index = vm.data.rules.findIndex(function(r) {\n            return r.id === rule.id;\n        });\n        vm.data.rules.splice(index, 1);\n\n        if (rule.field) {\n            _toggleRuleFieldUse(rule.field.id, false);\n        }\n\n        if (!vm.data.rules.length) {\n            localConditionOptions = angular.copy(vm.conditionOptions);\n            vm.disableAnd = false;\n            vm.disableOr = false;\n        }\n    }\n\n    function removeRuleSet() {\n        if (vm.onRemoveRuleSet) {\n            vm.onRemoveRuleSet();\n        }\n    }\n\n    function selectedFilterChanged() {\n        vm.data.name = vm.selectedFilter.name;\n        vm.data.type = vm.selectedFilter.type;\n        vm.data.rules = vm.data.rules.concat(angular.copy(vm.selectedFilter.rules));\n        _filterUserInputRules();\n    }\n\n    /* private functions */\n\n    function _applyConditionCheck(option) {\n        switch (vm.data.condition) {\n            case 'and':\n                if (!localConditionOptions.or[option].enable) {\n                    vm.disableOr = true;\n                }\n                break;\n            case 'or':\n                if (!localConditionOptions.and[option].enable) {\n                    vm.disableAnd = true;\n                }\n                break;\n        };\n    }\n\n    function _filterUserInputRules() {\n        let rules = [];\n        let names = [];\n        vm.data.rules.forEach(function(rule) {\n            if (rule.type === 'ruleSet') {\n                rules.push(rule);\n            }\n            // This ensures a rule which is a user input with the same name only renders on the UI once\n            if (rule.type === 'rule' && rule.isUserInput && names.indexOf(rule.userInput.name) === -1) {\n                rules.push(rule);\n                names.push(rule.userInput.name);\n            }\n        });\n        vm.data.rules = rules;\n    }\n\n    /**\n     * Returns an Object represents a new Rule.\n     * \n     * @returns {Object} a new Rule.\n     */\n    function _getRuleTemplate() {\n        let defaultTemplate = {\n            type: 'rule',\n            field: '',\n            operator: '',\n            value: ''\n        };\n        return _getTemplate(defaultTemplate, vm.defaultChildRule);\n    }\n\n    /**\n     * Returns an Object represents a new Rule Set.\n     * \n     * @returns {Object} a new Rule Set.\n     */\n    function _getRuleSetTemplate() {\n        let defaultTemplate = {\n            type: 'ruleSet',\n            condition: 'and',\n            rules: []\n        };\n        return _getTemplate(defaultTemplate, vm.defaultChildRuleSet);\n    }\n\n    /**\n     * Returns the template object with an id set. Uses applyTemplate if provided, otherwise uses defaultTemplate.\n     * \n     * @param {Object} defaultTemplate The default object. Uses if applyTemplate is not provided.\n     * @param {Object} applyTemplate The template to use. If not provided, defaultTemplate is used.\n     * @returns {Object}\n     */\n    function _getTemplate(defaultTemplate, applyTemplate) {\n        let id = uuid.v4();\n        let template = defaultTemplate;\n        if (applyTemplate) {\n            template = angular.copy(applyTemplate);\n        }\n        template.id = id;\n        return template;\n    }\n\n    /**\n     * Sets the disabled flag on the field identified by fieldId in the array vm.fieldsForRules.\n     * \n     * @param {number|string} fieldId The field id.\n     * @param {boolean} disabled value of the disabled flag to set.\n     */\n    function _toggleRuleFieldUse(fieldId, disabled) {\n        let field = _.find(vm.fieldsForRules, {id: fieldId});\n        field.disabled = disabled;\n    }\n    \n}","// Module\nvar code = \"<div class=\\\"rule-container\\\" id=\\\"{{$ctrl.data.id}}\\\">\\n    <div layout=\\\"row\\\" layout-align=\\\"start center\\\" ng-if=\\\"$ctrl.mode === 'build'\\\">\\n        <md-input-container flex=\\\"15\\\">\\n            <label>Field</label>\\n            <input id=\\\"{{$ctrl.data.id + '_FIELD'}}\\\" required ng-model=\\\"$ctrl.selectedField\\\" ng-if=\\\"!$ctrl.fields.length\\\">\\n            <md-select id=\\\"{{$ctrl.data.id + '_FIELD'}}\\\" ng-if=\\\"$ctrl.fields.length\\\"\\n                       ng-model=\\\"$ctrl.selectedField\\\" required\\n                       ng-change=\\\"$ctrl.selectedFieldChange($ctrl.selectedField)\\\">\\n                <md-option ng-repeat=\\\"field in $ctrl.fields\\\" ng-value=\\\"field\\\" ng-disabled=\\\"field.id !== $ctrl.selectedField.id && field.disabled\\\">\\n                    {{field.name}}\\n                </md-option>\\n            </md-select>\\n        </md-input-container>\\n        <div flex=\\\"5\\\"></div>\\n        <md-input-container flex=\\\"15\\\">\\n            <label>Operator</label>\\n            <md-select ng-model=\\\"$ctrl.data.operator\\\" required \\n                       ng-change=\\\"$ctrl.selectedOperatorChange($ctrl.data.operator)\\\"\\n                       id=\\\"{{$ctrl.data.id + '_OPERATOR'}}\\\">\\n                <md-option id=\\\"{{'OPERATOR_OPTION_' + operator.value.toUpperCase().replace('-', '_')}}\\\" \\n                           ng-repeat=\\\"operator in $ctrl.operators\\\" ng-value=\\\"operator.value\\\"\\n                           ng-disabled=\\\"$ctrl.selectedField.options.validOperators && \\n                                        $ctrl.selectedField.options.validOperators.indexOf(operator.value) === -1\\\">\\n                    {{operator.display}}\\n                </md-option>\\n            </md-select>\\n        </md-input-container>\\n        <div flex=\\\"5\\\"></div>\\n        <div flex=\\\"30\\\" ng-if=\\\"!$ctrl.selectedField\\\"></div>\\n        <md-input-container flex=\\\"30\\\" ng-if=\\\"$ctrl.selectedField && !$ctrl.selectedField.values\\\">\\n            <label>{{$ctrl.valueLabel}}</label>\\n            <input ng-required=\\\"!$ctrl.allowEmpty\\\" ng-disabled=\\\"$ctrl.data.isUserInput\\\" \\n                   ng-model=\\\"$ctrl.data.value\\\" ng-if=\\\"$ctrl.selectedField && !$ctrl.selectedField.values\\\"\\n                   id=\\\"{{$ctrl.data.id + '_VALUE'}}\\\">\\n        </md-input-container>\\n        <md-input-container flex=\\\"30\\\" class=\\\"class-type\\\"\\n                            ng-if=\\\"$ctrl.selectedField && $ctrl.selectedField.values && $ctrl.selectedField.values.length && !$ctrl.selectedField.options.multipleValues\\\">\\n            <label>{{$ctrl.valueLabel}}</label>\\n            <md-autocomplete\\n                md-input-id=\\\"{{$ctrl.data.id + '_VALUE'}}\\\"\\n                md-no-cache=\\\"true\\\"\\n                md-selected-item=\\\"$ctrl.data.value\\\"\\n                ng-blur=\\\"$ctrl.valueChanged()\\\"\\n                md-search-text=\\\"$ctrl.searchValueText\\\"\\n                md-items=\\\"item in $ctrl.valueSearch($ctrl.searchValueText)\\\"\\n                md-item-text=\\\"item\\\"\\n                md-min-length=\\\"0\\\"\\n                md-clear-button=\\\"false\\\"\\n                placeholder=\\\"{{$ctrl.data.isUserInput ? '(no value required)' : $ctrl.valueLabel}}\\\"\\n                ng-required=\\\"!$ctrl.data.isUserInput\\\"\\n                ng-disabled=\\\"$ctrl.data.isUserInput\\\">\\n                <md-item-template>\\n                    <span md-highlight-text=\\\"$ctrl.searchValueText\\\" md-highlight-flags=\\\"i\\\">{{item}}</span>\\n                </md-item-template>\\n            </md-autocomplete>\\n        </md-input-container>\\n        <md-input-container flex=\\\"30\\\" \\n                            ng-if=\\\"$ctrl.selectedField && $ctrl.selectedField.options.multipleValues\\\">\\n            <label>{{$ctrl.valueLabel}}</label>\\n            <md-select ng-model=\\\"$ctrl.data.value\\\" multiple aria-label=\\\"Select a value\\\" \\n                       placeholder=\\\"{{$ctrl.data.isUserInput ? '(no value required)' : $ctrl.valueLabel}}\\\"\\n                       ng-required=\\\"!$ctrl.data.isUserInput\\\" ng-disabled=\\\"$ctrl.data.isUserInput\\\"\\n                       id=\\\"{{$ctrl.data.id + '_VALUE'}}\\\">\\n                <md-option id=\\\"{{'VALUE_OPTION_' + value.toUpperCase()}}\\\" ng-value=\\\"value\\\" ng-repeat=\\\"value in $ctrl.selectedField.values\\\">{{value}}</md-option>\\n            </md-select>\\n        </md-input-container>\\n        <div flex=\\\"5\\\"></div>\\n        <md-input-container flex=\\\"10\\\" ng-if=\\\"$ctrl.allowEmpty\\\">\\n            <md-checkbox ng-model=\\\"$ctrl.data.isUserInput\\\" ng-change=\\\"$ctrl.userInputToggled()\\\">\\n                User Input\\n            </md-checkbox>\\n        </md-input-container>\\n        <md-input-container flex=\\\"10\\\" ng-if=\\\"$ctrl.selectedField.options.allowCaseSensitive\\\">\\n            <md-checkbox ng-model=\\\"$ctrl.data.caseSensitive\\\">\\n                Case Sensitive\\n            </md-checkbox>\\n        </md-input-container>\\n        <div flex=\\\"{{$ctrl.selectedField.options.allowCaseSensitive ? 5 : 15}}\\\"></div>\\n        <md-icon class=\\\"remove-rule\\\" flex=\\\"5\\\" ng-click=\\\"$ctrl.onRemove()\\\" ng-if=\\\"!$ctrl.options.useTextButtons\\\">\\n            remove_circle_outline\\n            <md-tooltip>Remove</md-tooltip>\\n        </md-icon>\\n        <md-button class=\\\"remove-rule md-small md-raised\\\" flex=\\\"5\\\" ng-click=\\\"$ctrl.onRemove()\\\" ng-if=\\\"$ctrl.options.useTextButtons\\\">\\n            X\\n            <md-tooltip>Remove</md-tooltip>\\n        </md-button>\\n    </div>\\n    <div layout=\\\"row\\\" layout-align=\\\"start center\\\" ng-if=\\\"$ctrl.mode === 'build' && $ctrl.allowEmpty && $ctrl.data.isUserInput && $ctrl.data.userInput\\\">\\n        <md-input-container flex=\\\"35\\\">\\n            <label>User Input Name</label>\\n            <md-autocomplete\\n                required\\n                md-no-cache=\\\"true\\\"\\n                md-selected-item=\\\"$ctrl.data.userInput.name\\\"\\n                md-search-text=\\\"$ctrl.userInputNameSearchText\\\"\\n                md-items=\\\"item in $ctrl.userInputNameSearch($ctrl.userInputNameSearchText)\\\"\\n                md-item-text=\\\"item\\\"\\n                md-min-length=\\\"0\\\"\\n                md-clear-button=\\\"false\\\"\\n                placeholder=\\\"Choose input (type to create new)\\\"\\n                ng-blur=\\\"$ctrl.userInputNameUpdated()\\\">\\n                <md-item-template>\\n                    <span md-highlight-text=\\\"$ctrl.userInputNameSearchText\\\" md-highlight-flags=\\\"^i\\\">{{item}}</span>\\n                </md-item-template>\\n            </md-autocomplete>\\n        </md-input-container>\\n        <div flex=\\\"5\\\"></div>\\n        <md-input-container flex=\\\"15\\\">\\n            <label>Filter Type</label>\\n            <md-select ng-model=\\\"$ctrl.data.userInput.filterType\\\">\\n                <md-option value=\\\"standard\\\">Standard</md-option>\\n                <md-option value=\\\"other\\\">Other</md-option>\\n            </md-select>\\n        </md-input-container>\\n        <div flex=\\\"5\\\"></div>\\n        <md-input-container flex=\\\"10\\\">\\n            <md-checkbox ng-model=\\\"$ctrl.data.userInput.allowWildcards\\\">\\n                Allow Wilcards\\n            </md-checkbox>\\n        </md-input-container>\\n        <div flex=\\\"5\\\"></div>\\n    </div>\\n    <div layout=\\\"row\\\" ng-if=\\\"$ctrl.mode === 'entry'\\\">\\n        <md-input-container flex=\\\"60\\\">\\n            <label>{{$ctrl.data.userInput.name}}</label>\\n            <textarea ng-model=\\\"$ctrl.data.value\\\" rows=\\\"2\\\" required></textarea>\\n        </md-input-container>\\n        <div flex=\\\"15\\\"></div>\\n        <md-input-container flex=\\\"20\\\">\\n            <label>Treat as</label>\\n            <md-select ng-model=\\\"$ctrl.data.treatAs\\\" required>\\n                <md-option value=\\\"literal\\\">Literal</md-option>\\n                <md-option value=\\\"regex\\\">Regex</md-option>\\n                <md-option value=\\\"wildcards\\\" ng-if=\\\"::$ctrl.data.userInput.allowWildcards\\\">Allow Wildcards</md-option>\\n            </md-select>\\n        </md-input-container>\\n    </div>\\n</div>\";\n// Exports\nmodule.exports = code;","'use strict';\n\n/**\n * A rule defines a link between a field, operator and its value. It also allows for setting conditions on the value\n * like whether it is case sensitive. It further allows for setting the field to be a user input and define separate\n * conditions for those.\n * \n * The bindings are:\n * @param {boolean} allowEmpty Indicates if empty rule values are allowed. Defaults to true.\n * @param {Object} data The initial data model for the component.\n * @param {Array} fields The list of fields to be used in the field drop-down.\n * @param {String} mode The mode of the component - 'build' or 'entry'.\n * @param {Function} onRemove Callback when the rule is removed.\n * @param {Array} operators The list of operators to be used in the operator drop-down.\n * @param {Object} options Used to change the display of the component. Possible keys are:\n *   - {boolean} useTextButtons Indicates if text buttons should be used instead of md icons. \n * @param {Array} userInputNames The list of available user input names.\n */\nangular.module('queryBuilder.components')\n.component('rule', {\n    template: require('./rule.component.html'),\n    bindings: {\n        allowEmpty: '<?',\n        data: '<?',\n        fields: '<',\n        mode: '@',\n        onFieldChange: '&',\n        onRemove: '&',\n        operators: '<?',\n        options: '<?',\n        userInputNames: '<'\n    },\n    controller: [ruleController]\n});\n\nfunction ruleController() {\n    let vm = this;\n    vm.$onInit = onInit;\n    vm.selectedField;\n    vm.selectedFieldChange = selectedFieldChange;\n    vm.selectedOperatorChange = selectedOperatorChange;\n    vm.userInputNameSearch = userInputNameSearch;\n    vm.userInputNameUpdated = userInputNameUpdated;\n    vm.userInputToggled = userInputToggled;\n    vm.valueChanged = valueChanged;\n    vm.valueLabel;\n    vm.valueSearch = valueSearch;\n\n    function onInit() {\n        if (vm.allowEmpty === undefined) {\n            vm.allowEmpty = true;\n        }\n        vm.fields = vm.fields !== undefined ? vm.fields : [];\n        vm.operators = vm.operators || [\n            {\n                description: 'that equals',\n                display: '=',\n                value: 'equals'\n            },\n            {\n                description: 'that is less than',\n                display: '<',\n                value: 'less-than'\n            },\n            {\n                description: 'that is greater than',\n                display: '>',\n                value: 'greater-than'\n            }\n        ];\n\n        let matchedField;\n        if (vm.data.field) {\n            // find field in the list of available fields\n            matchedField = _.find(vm.fields, {id: vm.data.field.id});\n        } else if (vm.fields.length) {\n            // Set selected field to be first enabled one\n            matchedField = _.find(vm.fields, {disabled: false});\n        }\n        vm.selectedField = matchedField;\n        if (vm.selectedField) {\n            vm.data.field = {\n                id: vm.selectedField.id,\n                name: vm.selectedField.name\n            };\n            if (vm.onFieldChange) {\n                vm.onFieldChange({newField: vm.selectedField});\n            }\n        }\n\n        if (!vm.data.operator) {\n            // Set default to operator field\n            vm.data.operator = vm.operators[0].value;\n        }\n\n        if (vm.mode === 'entry') {\n            vm.data.treatAs = 'literal';\n        }\n\n        if (vm.selectedField && vm.data.operator) {\n            _constructValueLabel(vm.selectedField, vm.data.operator);\n        }\n    }\n\n    /**\n     * Fired when Field input has been changed.\n     * \n     * @param {Object} field The selected field.\n     */\n    function selectedFieldChange(field) {\n        // If the field has its own set of values to select, clear the current value\n        if (field.values && field.values.length) {\n            vm.data.value = '';\n        }\n\n        let oldField = _.find(vm.fields, {id: vm.data.field.id});\n\n        // Update the field model\n        vm.data.field = {\n            id: field.id,\n            name: field.name\n        };\n\n        // Check that the current operator is valid for use with the new field - if not, find one which is valid\n        if (field.options && field.options.validOperators && field.options.validOperators.indexOf(vm.data.operator) === -1) {\n            let operator = _.find(vm.operators, function(operator) {\n                return field.options.validOperators.indexOf(operator.value) > -1;\n            });\n            vm.data.operator = operator.value;\n        }\n\n        _constructValueLabel(field, vm.data.operator);\n\n        if (vm.onFieldChange) {\n            vm.onFieldChange({newField: field, oldField: oldField});\n        }\n    }\n\n    /**\n     * Fired when Operator input has been changed.\n     * \n     * @param {String} operator The new selected operator.\n     */\n    function selectedOperatorChange(operator) {\n        _constructValueLabel(vm.data.field, operator);\n    }\n\n    /**\n     * Search the possible user input names using the given text. The search is case insensitive and\n     * all values are returned if text is not provided or empty.\n     * \n     * @param {String} text The search text.\n     * @returns {Array} User input names which partially match or match the text provided. \n     */\n    function userInputNameSearch(text) {\n        if (!text || !text.length) {\n            return vm.userInputNames;\n        }\n        let names = vm.userInputNames.filter(function(name) {\n            return name.toLowerCase().indexOf(text.toLowerCase()) > -1;\n        });\n        return names;\n    }\n\n    /**\n     * Fired when focus has been taken away from the user input name field.\n     * \n     * If the text entered for the name has not be used before, it is added to the userInputNames array for possible future use.\n     * If the user input name has not been set, vm.userInputNameSearchText is used instead.\n     */\n    function userInputNameUpdated() {\n        if (vm.userInputNameSearchText) {\n            if (vm.userInputNameSearchText.length && vm.userInputNames.indexOf(vm.userInputNameSearchText) === -1) {\n                vm.userInputNames.push(vm.userInputNameSearchText);\n            }\n            if (vm.userInputNameSearchText.length && !vm.data.userInput.name) {\n                vm.data.userInput.name = vm.userInputNameSearchText;\n            }\n        }\n    }\n\n    /**\n     * Fired when the user input checkbox is changed.\n     */\n    function userInputToggled() {\n        if (vm.data.isUserInput) {\n            vm.data.userInput = {\n                filterType: 'standard',\n                name: ''\n            };\n            vm.userInputNameSearchText = '';\n        } else {\n            vm.data.userInput = {};\n        }\n    }\n\n    /**\n     * Fired when focus is taken off the value field.\n     * \n     * If a value has not be selected but search text has been entered, set it as the value.\n     */\n    function valueChanged() {\n        if (!vm.data.value && vm.searchValueText && vm.searchValueText.length) {\n            vm.data.value = vm.searchValueText;\n        }\n    }\n\n    /**\n     * Search the possible values of the field using the given text. The search is case insensitive and\n     * all values are returned if text is not provided or empty.\n     * \n     * @param {String} text The search text.\n     * @returns {Array} Values which partially match or match the text provided. \n     */\n    function valueSearch(text) {\n        if (!text || !text.length) {\n            return vm.selectedField.values;\n        }\n        let values = vm.selectedField.values.filter(function(value) {\n            return value.toLowerCase().indexOf(text.toLowerCase()) > -1;\n        });\n        return values;\n    }\n\n    /* private functions */\n\n    /**\n     * Constructs the label used for the value field which is based upon field and operator inputs.\n     * e.g. 'Class that exactly matches'. This is set on vm.valueLabel.\n     * \n     * @param {Object} field The current field.\n     * @param {String} operatorValue The current operator value.\n     */\n    function _constructValueLabel(field, operatorValue) {\n        let operator = _.find(vm.operators, function(operator) {\n            return operator.value === operatorValue;\n        });\n        vm.valueLabel = `${field.name} ${operator.description}`;\n    }\n    \n}","'use strict';\n\nangular.module('queryBuilder.demo')\n.factory('demoDataService', function() {\n\n    const DATA = {\n        build: {\n          data: {\n            condition: 'and',\n            rules: []\n          },\n          displayOptions: {\n            entityTerms: {\n              rule: 'Criteria',\n              ruleSet: 'Group'\n            },\n            includeModel: false,\n            logicalTerms: {\n              and: 'AND',\n              or: 'OR'\n            },\n            useTextButtons: true\n          },\n          show: false,\n          conditionOptions: {\n            'and': {\n              rule: {\n                enable: true,\n                render: true\n              },\n              ruleSet: {\n                enable: true,\n                render: true\n              }\n            },\n            'or': {\n              rule: {\n                enable: false,\n                render: false\n              },\n              ruleSet: {\n                enable: true,\n                render: true\n              }\n            }\n          }\n        },\n        entry: {\n          conditionOptions: {\n            'and': {\n              rule: true,\n              ruleSet: true\n            },\n            'or': {\n              rule: true,\n              ruleSet: true\n            },\n            'criteria': {\n              rule: false,\n              ruleSet: false\n            }\n          },\n          data: {\n            condition: 'and',\n            rules: []\n          },\n          defaultChildRule: {\n            condition: 'criteria',\n            type: 'ruleSet',\n            rules: []\n          },\n          defaultChildRuleSet: {\n            condition: 'and',\n            type: 'ruleSet',\n            rules: []\n          },\n          displayOptions: {\n            entityTerms: {\n              rule: 'Filter',\n              ruleSet: 'Group'\n            },\n            includeModel: false,\n            logicalTerms: {\n              and: 'AND',\n              or: 'OR'\n            },\n            useTextButtons: true\n          },\n          show: false\n        },\n        filter: {\n          allowEmptyRules: false,\n          data: {\n            condition: 'and',\n            rules: [\n              {\n                type: 'rule',\n                field: {\n                  id: 11,\n                  name: 'Any',\n                  options: {\n                      allowCaseSensitive: true\n                  }\n                },\n                operator: 'exact-match',\n                value: '',\n                id: 'b62a994e-847a-4fdf-a288-d74adc0a82ce'\n              }\n            ]\n          },\n          displayOptions: {\n            entityTerms: {\n              rule: 'Criteria',\n              ruleSet: 'Group'\n            },\n            includeModel: false,\n            logicalTerms: {\n              and: 'AND',\n              or: 'OR'\n            },\n            useTextButtons: true\n          },\n          show: false,\n          conditionOptions: {\n            'and': {\n              rule: {\n                enable: true,\n                render: true\n              },\n              ruleSet: {\n                enable: false,\n                render: false\n              }\n            },\n            'or': {\n              rule: {\n                enable: false,\n                render: false\n              },\n              ruleSet: {\n                enable: false,\n                render: false\n              }\n            }\n          }\n        },\n      };\n\n    return {\n        getData: getData\n    };\n\n    function getData(key) {\n        return angular.copy(DATA[key]);\n    }\n\n});","// Module\nvar code = \"<div layout=\\\"row\\\">\\n    <md-switch ng-model=\\\"$ctrl.data.useTextButtons\\\" ng-change=\\\"$ctrl.useTextButtonsChanged({id: $ctrl.id, val: $ctrl.data.useTextButtons})\\\">Use text buttons</md-switch>\\n    <md-switch ng-model=\\\"$ctrl.data.includeModel\\\" ng-change=\\\"$ctrl.includeModelChanged({id: $ctrl.id, val: $ctrl.data.includeModel})\\\">Show Model</md-switch>\\n    <md-switch ng-model=\\\"$ctrl.data.logicTerms\\\" ng-change=\\\"$ctrl.logicTermsChanged({id: $ctrl.id, val: $ctrl.data.logicTerms})\\\">Use terms ALL/ANY</md-switch>\\n</div>\";\n// Exports\nmodule.exports = code;","'use strict';\n\nangular.module('queryBuilder.demo')\n.component('demoOptions', {\n    template: require('./demo-options.component.html'),\n    bindings: {\n        data: '<?',\n        id: '@',\n        includeModelChanged: '&?',\n        logicTermsChanged: '&?',\n        useTextButtonsChanged: '&?'\n    },\n    controller: [demoOptionsController]\n});\n\nfunction demoOptionsController() {\n    let vm = this;\n}","'use strict';\r\n\r\nangular.module('queryBuilder.demo')\r\n\r\n.config(['$routeProvider', function($routeProvider) {\r\n  $routeProvider.when('/QueryBuilder/demo', {\r\n    template: require('./demo.html'),\r\n    controller: ['$mdDialog', 'demoDataService', 'fieldDataService', 'filterDataService', 'ruleDataService', demoController],\r\n    controllerAs: 'vm'\r\n  });\r\n}])\r\n\r\n.controller('demoController', demoController);\r\n\r\nfunction demoController($mdDialog, demoDataService, fieldDataService, filterDataService, ruleDataService) {\r\n  let vm = this;\r\n  vm.demos = {\r\n    build: demoDataService.getData('build'),\r\n    entry: demoDataService.getData('entry'),\r\n    filter: demoDataService.getData('filter')\r\n  };\r\n  vm.fields = fieldDataService.getFields();\r\n  vm.includeModelChanged = includeModelChanged;\r\n  vm.logicTerms = false;\r\n  vm.logicTermsChanged = logicTermsChanged;\r\n  vm.openDialog = openDialog;\r\n  vm.operators = ruleDataService.getOperators();\r\n  vm.queryFilters = filterDataService.getFilters();\r\n  vm.useTextButtonsChanged = useTextButtonsChanged;\r\n\r\n  activate();\r\n\r\n  function activate() {\r\n    vm.quickFilterFields = angular.copy(vm.fields);\r\n    vm.quickFilterFields.splice(0, 0, {\r\n      id: vm.quickFilterFields.length + 1,\r\n      name: 'Any',\r\n      options: {\r\n          allowCaseSensitive: true\r\n      }\r\n    });\r\n    vm.options = {\r\n      build: {\r\n        includeModel: vm.demos.build.displayOptions.includeModel,\r\n        logicTerms: false,\r\n        useTextButtons: vm.demos.build.displayOptions.useTextButtons \r\n      },\r\n      entry: {\r\n        includeModel: vm.demos.entry.displayOptions.includeModel,\r\n        logicTerms: false,\r\n        useTextButtons: vm.demos.entry.displayOptions.useTextButtons\r\n      }\r\n    };\r\n  }\r\n\r\n  function logicTermsChanged(id, val) {\r\n    if (val) {\r\n      vm.demos[id].displayOptions.logicalTerms.and = 'ALL';\r\n      vm.demos[id].displayOptions.logicalTerms.or = 'ANY';\r\n    } else {\r\n      vm.demos[id].displayOptions.logicalTerms.and = 'AND';\r\n      vm.demos[id].displayOptions.logicalTerms.or = 'OR';\r\n    }\r\n  }\r\n\r\n  function openDialog(ev) {\r\n    vm.demos.filter = demoDataService.getData('filter');\r\n\r\n    $mdDialog.show({\r\n      bindToController: true,\r\n      clickOutsideToClose: true,\r\n      controller: ['$scope', '$mdDialog', DialogController],\r\n      controllerAs: 'vm',\r\n      locals: {\r\n        builderData: vm.demos.filter,\r\n        fields: vm.quickFilterFields,\r\n        operators: vm.operators,\r\n        title: 'Quick Filter'\r\n      },\r\n      targetEvent: ev,\r\n      template: require('./demo.dialog.html')\r\n    })\r\n  };\r\n\r\n  function DialogController($scope, $mdDialog) {\r\n    let vm = this;\r\n    vm.close = close;\r\n    \r\n    function close() {\r\n      $mdDialog.cancel();\r\n    }\r\n\r\n  }\r\n\r\n  function includeModelChanged(id, val) {\r\n    vm.demos[id].displayOptions.includeModel = val;\r\n  }\r\n  \r\n  function useTextButtonsChanged(id, val) {\r\n    vm.demos[id].displayOptions.useTextButtons = val;\r\n  }\r\n  \r\n}","// Module\nvar code = \"<md-dialog class=\\\"demo-dialog\\\">\\n    <md-toolbar>\\n        <div class=\\\"md-toolbar-tools\\\">\\n            <h2>{{vm.title}}</h2>\\n        </div>\\n    </md-toolbar>\\n    <md-dialog-content>\\n        <div class=\\\"md-dialog-content\\\">\\n            <query-builder allow-empty-rules=\\\"vm.builderData.allowEmptyRules\\\"\\n                           condition-options=\\\"vm.builderData.conditionOptions\\\"\\n                           data=\\\"vm.builderData.data\\\"\\n                           display-options=\\\"vm.builderData.displayOptions\\\"\\n                           fields=\\\"vm.fields\\\"\\n                           initial-condition=\\\"and\\\"\\n                           mix-rules=\\\"false\\\"\\n                           mode=\\\"build\\\"\\n                           operators=\\\"vm.operators\\\">\\n            </query-builder>\\n        </div>\\n    </md-dialog-content>\\n    <md-dialog-actions layout=\\\"row\\\">\\n        <span flex></span>\\n        <md-button ng-click=\\\"vm.close()\\\">Close</md-button>\\n    </md-dialog-actions>\\n</md-dialog>\";\n// Exports\nmodule.exports = code;","// Module\nvar code = \"<md-card class=\\\"main-container\\\" layout-padding>\\r\\n    <h2>Filter Builder</h2>\\r\\n    <p>Each section shows the builder with a different config/view set. Click the down arrow to expand.</p>\\r\\n    <collapsible-panel switch=\\\"vm.demos.build.show\\\" title=\\\"Filter builder (in build mode)\\\" title-size=\\\"3\\\"></collapsible-panel>\\r\\n    <div ng-show=\\\"vm.demos.build.show\\\">\\r\\n        <demo-options data=\\\"vm.options.build\\\"\\r\\n                      id=\\\"build\\\" \\r\\n                      include-model-changed=\\\"vm.includeModelChanged(id, val)\\\"\\r\\n                      logic-terms-changed=\\\"vm.logicTermsChanged(id, val)\\\"\\r\\n                      use-text-buttons-changed=\\\"vm.useTextButtonsChanged(id, val)\\\">\\r\\n        </demo-options>\\r\\n        <query-builder condition-options=\\\"vm.demos.build.conditionOptions\\\"\\r\\n                       data=\\\"vm.demos.build.data\\\"\\r\\n                       display-options=\\\"vm.demos.build.displayOptions\\\"\\r\\n                       fields=\\\"vm.fields\\\"\\r\\n                       initial-condition=\\\"and\\\"\\r\\n                       mix-rules=\\\"false\\\"\\r\\n                       mode=\\\"build\\\"\\r\\n                       operators=\\\"vm.operators\\\">\\r\\n        </query-builder>\\r\\n    </div>\\r\\n    <md-divider></md-divider>\\r\\n    <collapsible-panel switch=\\\"vm.demos.filter.show\\\" title=\\\"Quick filter\\\" title-size=\\\"3\\\"></collapsible-panel>\\r\\n    <div ng-show=\\\"vm.demos.filter.show\\\">\\r\\n        <md-button ng-click=\\\"vm.openDialog($event)\\\">Click to open Quick Filter dialog</md-button>\\r\\n    </div>\\r\\n    <md-divider></md-divider>\\r\\n    <collapsible-panel switch=\\\"vm.demos.entry.show\\\" title=\\\"Query form (in entry mode)\\\" title-size=\\\"3\\\"></collapsible-panel>\\r\\n    <div ng-show=\\\"vm.demos.entry.show\\\">\\r\\n        <demo-options data=\\\"vm.options.entry\\\"\\r\\n                      id=\\\"entry\\\" \\r\\n                      include-model-changed=\\\"vm.includeModelChanged(id, val)\\\"\\r\\n                      logic-terms-changed=\\\"vm.logicTermsChanged(id, val)\\\"\\r\\n                      use-text-buttons-changed=\\\"vm.useTextButtonsChanged(id, val)\\\">\\r\\n        </demo-options>\\r\\n        <query-builder child-rule=\\\"vm.demos.entry.defaultChildRule\\\"\\r\\n                       child-rule-set=\\\"vm.demos.entry.defaultChildRuleSet\\\"\\r\\n                       condition-options=\\\"vm.demos.entry.conditionOptions\\\"\\r\\n                       data=\\\"vm.demos.entry.data\\\"\\r\\n                       display-options=\\\"vm.demos.entry.displayOptions\\\"\\r\\n                       fields=\\\"vm.fields\\\"\\r\\n                       mode=\\\"entry\\\"\\r\\n                       pre-defined-rules=\\\"vm.queryFilters\\\">\\r\\n        </query-builder>\\r\\n    </div>\\r\\n</md-card>\\r\\n\\r\\n\\r\\n\";\n// Exports\nmodule.exports = code;","angular.module('queryBuilder.demo', ['ngRoute'])","angular.module('queryBuilder.directives', [])","'use strict';\n\nangular.module('queryBuilder.directives')\n.directive('ruleSize', function () { \n    return {\n      require: 'ngModel',\n      link: function(scope, elem, attr, ngModel) {\n\n        \n        function validate() {\n          let rules = ngModel.$modelValue.rules;\n          if (rules.length > 1) {\n            ngModel.$setValidity('invalidRuleSize', true);\n          } else {\n            ngModel.$setValidity('invalidRuleSize', false);\n          }\n        }\n        \n        let ruleSizePresent = attr.ruleSize;\n        if (ruleSizePresent) {\n          scope.$watch(function(newValue, oldValue) {\n            validate();\n          });\n        }\n      }\n    };\n  });","'use strict';\n\nangular.module('queryBuilder.services')\n.factory('fieldDataService', function() {\n\n    return {\n        getFields: getFields\n    };\n\n    function getFields() {\n        let filters = [\n            {\n                id: 1,\n                name: 'Attribution',\n                values: [\n                    'COMMON',\n                    'CAT',\n                    'DOG'\n                ],\n                options: {\n                    allowCaseSensitive: false,\n                    multipleValues: true,\n                    validOperators: ['exact-match']\n                }\n            },\n            {\n                id: 2,\n                name: 'Class',\n                values: [],\n                options: {\n                    allowCaseSensitive: true\n                }\n            },\n            {\n                id: 3,\n                name: 'Rule',\n                options: {\n                    allowCaseSensitive: true\n                }\n            },\n            {\n                id: 4,\n                name: 'Scope',\n                options: {\n                    allowCaseSensitive: true\n                }\n            },\n            {\n                id: 5,\n                name: 'Security',\n                options: {\n                    allowCaseSensitive: true\n                }\n            },\n            {\n                id: 6,\n                name: 'Service',\n                options: {\n                    allowCaseSensitive: true\n                }\n            },\n            {\n                id: 7,\n                name: 'Tech',\n                options: {\n                    allowCaseSensitive: true\n                }\n            },\n            {\n                id: 8,\n                name: 'Type',\n                values: [],\n                options: {\n                    allowCaseSensitive: true\n                }\n            },\n            {\n                id: 9,\n                name: 'Universe',\n                options: {\n                    allowCaseSensitive: true\n                }\n            },\n            {\n                id: 10,\n                name: 'Value',\n                options: {\n                    allowCaseSensitive: true\n                }\n            },\n        ];\n\n        // Populate class and type with some data\n        for (let i = 1; i <= 100; i++) {\n            filters[1].values.push('Class' + i);\n            filters[7].values.push('Type' + i);\n        }\n\n        return filters;\n    }\n\n});","'use strict';\n\nangular.module('queryBuilder.services')\n.factory('filterDataService', function() {\n\n    return {\n        getFilters: getFilters\n    };\n\n    /**\n     * Some filters data - in real app, this will come from database.\n     * @returns {Array}\n     */\n    function getFilters() {\n        return [\n            {\n                id: 1,\n                name: 'Filter 1 - type filter',\n                type: 'ruleSet',\n                condition: 'and',\n                rules: [\n                    {\n                        id: '1-1',\n                        type: 'rule',\n                        field: 'class',\n                        operator: 'equals',\n                        value: 'class1'\n                    },\n                    {\n                        id: '1-2',\n                        type: 'rule',\n                        field: 'type',\n                        operator: 'equals',\n                        value: '',\n                        isUserInput: true,\n                        userInput: {\n                            allowWildcards: false,\n                            name: 'type'\n                        }\n                    }\n                ]\n            },\n            {\n                id: 2,\n                name: 'Filter 2 - class filter',\n                type: 'ruleSet',\n                condition: 'and',\n                rules: [\n                    {\n                        id: '1-1',\n                        type: 'rule',\n                        field: 'class',\n                        operator: 'equals',\n                        value: '',\n                        isUserInput: true,\n                        userInput: {\n                            allowWildcards: true,\n                            name: 'class'\n                        }\n                    },\n                    {\n                        id: '1-2',\n                        type: 'rule',\n                        field: 'rule',\n                        operator: 'equals',\n                        value: 'rule1'\n                    }\n                ]\n            },\n            {\n                id: 3,\n                name: 'Filter 3 - class & rule filter, different inputs',\n                type: 'ruleSet',\n                condition: 'and',\n                rules: [\n                    {\n                        id: '1-1',\n                        type: 'rule',\n                        field: 'class',\n                        operator: 'equals',\n                        value: '',\n                        isUserInput: true,\n                        userInput: {\n                            allowWildcards: false,\n                            name: 'class'\n                        }\n                    },\n                    {\n                        id: '1-2',\n                        type: 'rule',\n                        field: 'rule',\n                        operator: 'equals',\n                        value: '',\n                        isUserInput: true,\n                        userInput: {\n                            allowWildcards: false,\n                            name: 'rule'\n                        }\n                    },\n                    {\n                        id: '1-3',\n                        type: 'rule',\n                        field: 'type',\n                        operator: 'equals',\n                        value: 'type1'\n                    }\n                ]\n            },\n            {\n                id: 4,\n                name: 'Filter 4 - class & rule filter, same inputs',\n                type: 'ruleSet',\n                condition: 'and',\n                rules: [\n                    {\n                        id: '1-1',\n                        type: 'rule',\n                        field: 'class',\n                        operator: 'equals',\n                        value: '',\n                        isUserInput: true,\n                        userInput: {\n                            allowWildcards: false,\n                            name: 'Enter a value used for both class and rule'\n                        }\n                    },\n                    {\n                        id: '1-2',\n                        type: 'rule',\n                        field: 'rule',\n                        operator: 'equals',\n                        value: '',\n                        isUserInput: true,\n                        userInput: {\n                            allowWildcards: false,\n                            name: 'Enter a value used for both class and rule'\n                        }\n                    },\n                    {\n                        id: '1-3',\n                        type: 'rule',\n                        field: 'type',\n                        operator: 'equals',\n                        value: 'type1'\n                    }\n                ]\n            },\n            {\n                id: 5,\n                name: 'Filter 5 - read only, no user inputs',\n                type: 'ruleSet',\n                condition: 'and',\n                rules: [\n                    {\n                        id: '1-1',\n                        type: 'rule',\n                        field: 'class',\n                        operator: 'equals',\n                        value: 'class',\n                        isUserInput: false,\n                        userInput: {}\n                    },\n                    {\n                        id: '1-2',\n                        type: 'rule',\n                        field: 'rule',\n                        operator: 'equals',\n                        value: 'rule1',\n                        isUserInput: false,\n                        userInput: {}\n                    }\n                ]\n            }\n        ];\n    }\n\n});","'use strict';\n\nangular.module('queryBuilder.services')\n.factory('filterTransformationService', function() {\n\n    return {\n        getPredicateTree: getPredicateTree\n    };\n\n    /**\n     * Maps the given filter builder model to a predicate tree.\n     * \n     * @param {Object} filterBuilderModel The model used by the filter builder component.\n     * @returns {Object} a predicate tree.\n     */\n    function getPredicateTree(filterBuilderModel) {\n        return _mapRuleSet(filterBuilderModel);\n    }\n\n    function _mapRule(rule, criteria) {\n        const criteriaNameByFieldName = {\n            'Class': 'CLASS',\n            'Rule': 'RULE',\n            'Scope': 'SCOPE',\n            'Security': 'SECURITY',\n            'Service' : 'SERVICE',\n            'Tech': 'TECH',\n            'Type': 'TYPE',\n            'Universe': 'UNIVERSE',\n            'Value': 'VALUE'\n        };\n        let field = criteriaNameByFieldName[rule.field.name];\n        let values = _mapValues(rule.operator, rule.value);\n        if (criteria[field]) {\n            criteria[field] = criteria[field].concat(values);\n        } else {\n            criteria[field] = values;\n        }\n    }\n\n    function _mapRuleSet(ruleSet, criteria = {}) {\n\n        const type = ruleSet.rules.length === 1 ? 'MATCH' : ruleSet.condition.toUpperCase();\n        const predicateTree = {\n            type: type,\n            criteria: criteria \n        };\n\n        ruleSet.rules.forEach(function(rule) {\n            switch(rule.type) {\n                case 'rule':\n                    if (rule.field.name === 'Attribution') {\n                        predicateTree.attributions = rule.value;\n                    } else {\n                        _mapRule(rule, criteria);\n                    }\n                    break;\n                case 'ruleSet':\n                    _mapRuleSet(rule, criteria);\n                    break;\n            }\n        });\n\n        return predicateTree;\n    }\n\n    function _mapValues(operator, values) {\n        let vals = Array.isArray(values) ? values : [values];\n        let result = vals.map(function(val) {\n            switch(operator) {\n                case 'contains':\n                    return _.escapeRegExp(val);\n                case 'ends-with':\n                    return _.escapeRegExp(val) + '$';\n                case 'exact-match':\n                    return '^' + _.escapeRegExp(val) + '$';\n                case 'regex':\n                    return `${val}`;\n                case 'starts-with':\n                    return '^' + _.escapeRegExp(val);\n                default:\n                    throw new Error(`Unknown operator ${operator}`);\n            }\n        });\n        \n        return result;\n    }\n\n});","'use strict';\n\nangular.module('queryBuilder.services')\n.factory('ruleDataService', function() {\n\n    return {\n        getOperators: getOperators\n    };\n\n    function getOperators() {\n        return [\n            {\n                description: 'exactly matches',\n                display: 'Exact Match',\n                value: 'exact-match'\n            },\n            {\n                description: 'matches regex',\n                display: 'Regex',\n                value: 'regex'\n            },\n            {\n                description: 'contains',\n                display: 'Contains',\n                value: 'contains'\n            },\n            {\n                description: 'starts with',\n                display: 'Starts with',\n                value: 'starts-with'\n            },\n            {\n                description: 'ends with',\n                display: 'Ends with',\n                value: 'ends-with'\n            }\n        ];\n    }\n\n});","'use strict';\n\nangular.module('queryBuilder.services', []);"],"sourceRoot":""}